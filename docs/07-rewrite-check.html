<head>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
  <style>
    .score-pass{color:#16a34a}
    .score-retry{color:#dc2626}
    .stat{border:1px solid rgba(0,0,0,.08);border-radius:.5rem;padding:.5rem .75rem;background:#fafafa}
    .btn{background:#f9fafb;border:1px solid #d1d5db;border-radius:.5rem;padding:.5rem .75rem}
    .btn.primary{background:#2563eb;color:#fff;border-color:#2563eb}
    .kbd{display:inline-block;border:1px solid #d1d5db;border-bottom-width:2px;border-radius:.375rem;padding:.125rem .375rem;background:#fff}
    textarea{white-space:pre-wrap}
    .pill{display:inline-block;background:#eef2ff;color:#3730a3;border:1px solid #c7d2fe;border-radius:9999px;padding:.125rem .5rem;font-size:.75rem}
    .hint{background:#fff7ed;border-left:4px solid #fb923c}
  </style>
</head>

<body class="min-h-screen antialiased bg-[#FAFAFA] font-[Inter]">
  <div class="p-4">
    <div class="mx-auto max-w-6xl text-base/7 text-gray-700">
      <h1 class="text-xl font-bold border-l border-[rgba(0,0,0,.08)] pl-4 bg-blue-100 py-4">ğŸ–Šï¸ ãƒªãƒ©ã‚¤ãƒˆ(ç›®æ¨™ï¼š75ç‚¹ãƒã‚§ãƒƒã‚¯)</h1>

      <!-- ãƒ«ãƒ¼ãƒ–ãƒªãƒƒã‚¯ã‚«ãƒ¼ãƒ‰ -->
      <div class="bg-white rounded-md my-4 p-4 border shadow-[0_2px_2px_rgba(0,0,0,0.04)] border-[rgba(0,0,0,.08)]">
        <div class="flex items-center gap-3 mb-3">
          <h2 class="font-medium text-[#171717]"><strong>ğŸ§® 75ç‚¹ãƒ«ãƒ¼ãƒ–ãƒªãƒƒã‚¯</strong></h2>
          <span class="text-xs text-gray-500">ï¼ˆãƒã‚§ãƒƒã‚¯ã™ã‚‹ã¨åˆè¨ˆã«åæ˜ ï¼‰</span>
          <div class="ml-auto grid grid-cols-3 gap-2">
            <div class="stat text-center"><div class="text-xs text-gray-500">åˆè¨ˆ</div><div id="score" class="text-2xl font-bold">0</div></div>
            <div class="stat text-center"><div class="text-xs text-gray-500">é–¾å€¤</div><div class="text-2xl font-bold">75</div></div>
            <div class="stat text-center"><div class="text-xs text-gray-500">åˆ¤å®š</div><div id="judge" class="text-2xl font-bold score-retry">RETRY</div></div>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <h3 class="font-semibold mb-2">[ã‚³ã‚¢6]ï¼ˆè¨ˆ85ç‚¹ï¼‰</h3>
            <ul class="space-y-2">
              <li><label class="flex items-center gap-2"><input type="checkbox" data-score="20" class="crit" data-id="goal"> ç›®çš„ï¼ˆæˆåŠŸæ¡ä»¶ï¼‰ãŒä¸€æ–‡ã§å…ˆé ­ã«ã‚ã‚‹ <span class="pill">+20</span></label></li>
              <li><label class="flex items-center gap-2"><input type="checkbox" data-score="10" class="crit" data-id="role"> å½¹å‰²ï¼‹ãƒˆãƒ¼ãƒ³ã§è¦–ç‚¹ã‚’å›ºå®š <span class="pill">+10</span></label></li>
              <li><label class="flex items-center gap-2"><input type="checkbox" data-score="15" class="crit" data-id="ctx"> æ–‡è„ˆã‚’è¦‹å‡ºã—/ã‚¿ã‚°ã§åŒºåˆ‡ã‚Šã€æ··ã–ã£ã¦ã„ãªã„ <span class="pill">+15</span></label></li>
              <li><label class="flex items-center gap-2"><input type="checkbox" data-score="15" class="crit" data-id="steps"> æ‰‹é †ãƒ»ãƒ«ãƒ¼ãƒ«ãŒç•ªå·ä»˜ãã§æ˜ç¤º <span class="pill">+15</span></label></li>
              <li><label class="flex items-center gap-2"><input type="checkbox" data-score="15" class="crit" data-id="format"> å‡ºåŠ›å½¢å¼ã‚’å³å¯†æŒ‡å®šï¼ˆJSON/è¡¨/è¦‹å‡ºã—ï¼‰ <span class="pill">+15</span></label></li>
              <li><label class="flex items-center gap-2"><input type="checkbox" data-score="10" class="crit" data-id="examples"> ä¾‹ï¼ˆFew-shotï¼‰ãŒ1â€“2ä»¶ï¼ˆå¢ƒç•Œä¾‹å«ã‚€ï¼‰ <span class="pill">+10</span></label></li>
            </ul>
          </div>
          <div>
            <h3 class="font-semibold mb-2">[ã‚ªãƒ—ã‚·ãƒ§ãƒ³4]ï¼ˆè¨ˆ15ç‚¹ï¼‰</h3>
            <ul class="space-y-2">
              <li><label class="flex items-center gap-2"><input type="checkbox" data-score="5" class="crit" data-id="reason"> æ€è€ƒæ–¹é‡ãƒ»è‡ªå·±æ¤œè¨¼ã‚’ä»˜è¨˜ <span class="pill">+5</span></label></li>
              <li><label class="flex items-center gap-2"><input type="checkbox" data-score="5" class="crit" data-id="final"> Final Remindersï¼ˆæœ€å¾Œã«å®ˆã‚‹3ç‚¹ï¼‰ <span class="pill">+5</span></label></li>
              <li><label class="flex items-center gap-2"><input type="checkbox" data-score="3" class="crit" data-id="prefilled"> Prefilled Responseã§æ ã‚’å›ºå®š <span class="pill">+3</span></label></li>
              <li><label class="flex items-center gap-2"><input type="checkbox" data-score="2" class="crit" data-id="history"> ä¼šè©±å±¥æ­´ã‚’è¦ç´„ã—ã¦åæ˜  <span class="pill">+2</span></label></li>
            </ul>
          </div>
        </div>

        <div class="hint p-3 mt-4 rounded">
          <p class="text-sm"><strong>ã‚³ãƒ„:</strong> ã¾ãš <span class="pill">ã‚³ã‚¢6</span> ã‚’æº€ãŸã™ã ã‘ã§ <strong>85ç‚¹</strong> ã«åˆ°é”ã§ãã¾ã™ã€‚è¶³ã‚Šãªã„é …ç›®ã‚’1ã¤ã ã‘è¶³ã™ã€Œå°ã•ãªãƒªãƒ©ã‚¤ãƒˆã€ã‚’ç¹°ã‚Šè¿”ã™ã®ãŒæœ€é€Ÿã§ã™ã€‚</p>
        </div>
      </div>

      <!-- ãƒªãƒ©ã‚¤ãƒˆãƒ¯ãƒ¼ã‚¯ -->
      <div class="bg-white rounded-md my-4 p-4 border shadow-[0_2px_2px_rgba(0,0,0,0.04)] border-[rgba(0,0,0,.08)]">
        <div class="flex items-center gap-3 mb-3">
          <h2 class="font-medium text-[#171717]"><strong>âœï¸ ãƒªãƒ©ã‚¤ãƒˆãƒ¯ãƒ¼ã‚¯</strong></h2>
          <span class="text-xs text-gray-500">ï¼ˆä¸è¶³ç‚¹ã‹ã‚‰å³å´ã«æ”¹å–„éª¨å­ã‚’è‡ªå‹•ç”Ÿæˆï¼‰</span>
          <div class="ml-auto flex items-center gap-2">
            <button id="buildOne" class="btn">ä¸è¶³ã‚’1ã¤ã ã‘è¿½åŠ </button>
            <button id="buildAll" class="btn primary">ä¸è¶³ã‚’ã™ã¹ã¦åæ˜ </button>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <h3 class="font-semibold mb-1">åˆç¨¿ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</h3>
            <textarea id="draft" class="w-full border rounded px-3 py-2 h-56" placeholder="ã“ã“ã«åˆç¨¿ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è²¼ã‚Šä»˜ã‘"></textarea>
            <div class="text-xs text-gray-500 mt-1">ãƒ’ãƒ³ãƒˆ: ç›®çš„ãƒ»å¯¾è±¡ãƒ»æ–‡å­—æ•°ãƒ»å½¢å¼ãŒç„¡ã„å ´åˆã¯é«˜é…ç‚¹ã®ä¸è¶³ã«ãªã‚ŠãŒã¡ã§ã™ã€‚</div>
          </div>
          <div>
            <h3 class="font-semibold mb-1">ãƒªãƒ©ã‚¤ãƒˆæ¡ˆï¼ˆä¸è¶³ç‚¹ã®éª¨å­ï¼‰</h3>
            <textarea id="rewrite" class="w-full border rounded px-3 py-2 h-56" placeholder="å³ä¸Šã®ãƒœã‚¿ãƒ³ã§è‡ªå‹•ç”Ÿæˆã€‚å¿…è¦ã«å¿œã˜ã¦è‚‰ä»˜ã‘ã—ã¦ãã ã•ã„ã€‚"></textarea>
            <div id="todo" class="text-xs text-gray-600 mt-1"></div>
          </div>
        </div>
      </div>

      <!-- 30ç§’ã‚¿ã‚¤ãƒãƒ¼ -->
      <div class="bg-white rounded-md my-4 p-4 border shadow-[0_2px_2px_rgba(0,0,0,0.04)] border-[rgba(0,0,0,.08)]">
        <div class="flex items-center gap-3">
          <h2 class="font-medium text-[#171717]"><strong>â±ï¸ 30ç§’ãƒšã‚¢ãƒã‚§ãƒƒã‚¯ç”¨ã‚¿ã‚¤ãƒãƒ¼</strong></h2>
          <div class="ml-auto flex items-center gap-2">
            <button id="tStart" class="btn primary">é–‹å§‹</button>
            <button id="tPause" class="btn">ä¸€æ™‚åœæ­¢</button>
            <button id="tReset" class="btn">ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
        </div>
        <div class="mt-3">
          <div class="w-full bg-gray-200 rounded h-3 overflow-hidden">
            <div id="bar" class="h-3 bg-blue-600" style="width:0%"></div>
          </div>
          <div class="text-center mt-2 text-2xl font-bold" id="tLabel">30.0</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ã‚¹ã‚³ã‚¢è¨ˆç®—
    const scoreEl = document.getElementById('score');
    const judgeEl = document.getElementById('judge');
    const critEls = Array.from(document.querySelectorAll('.crit'));
    function recalc(){
      const sum = critEls.reduce((s,el)=> s + (el.checked? Number(el.dataset.score):0), 0);
      scoreEl.textContent = sum;
      if(sum>=75){ judgeEl.textContent='PASS'; judgeEl.classList.add('score-pass'); judgeEl.classList.remove('score-retry'); }
      else{ judgeEl.textContent='RETRY'; judgeEl.classList.add('score-retry'); judgeEl.classList.remove('score-pass'); }
      renderTodo();
    }
    critEls.forEach(el=> el.addEventListener('change', recalc));
    recalc();

    // ä¸è¶³ãƒªã‚¹ãƒˆâ†’ãƒªãƒ©ã‚¤ãƒˆéª¨å­
    const id2text = {
      goal: 'ç›®çš„ï¼ˆæˆåŠŸæ¡ä»¶ï¼‰: {ä¸€æ–‡ã§æ˜è¨˜ã€‚èª°å‘ã‘ã«/ä½•ã‚’/ã©ã‚Œãã‚‰ã„ã§/è©•ä¾¡åŸºæº–ã¯ä½•ã‹}',
      role: 'å½¹å‰²ãƒ»ãƒˆãƒ¼ãƒ³: {ä¾‹: ã‚ãªãŸã¯â—¯â—¯ã®å°‚é–€å®¶ã§ã™ã€‚ä¸å¯§ä½“/å£èª¿æŒ‡å®šâ€¦}',
      ctx: 'æ–‡è„ˆï¼ˆèƒŒæ™¯/å¯¾è±¡/å‚ç…§/åˆ¶ç´„ï¼‰:\n- å¯¾è±¡: {...}\n- å‰æ/å…¥åŠ›: {...}\n- åˆ¶ç´„: {...}',
      steps: 'æ‰‹é †ãƒ»ãƒ«ãƒ¼ãƒ«ï¼ˆç•ªå·ä»˜ãï¼‰:\n1) {...}\n2) {...}\nç¦æ­¢: {...}',
      format: 'å‡ºåŠ›å½¢å¼: {JSON/è¡¨/è¦‹å‡ºã—}ï¼ˆkeys/åˆ—å/é †åº/è¨€èª/é•·ã•ãªã©ã‚’å³å¯†æŒ‡å®šï¼‰',
      examples: 'ä¾‹ï¼ˆFew-shotï¼‰:\nå…¥åŠ›: {...}\næœŸå¾…å‡ºåŠ›: {...}',
      reason: 'æ€è€ƒæ–¹é‡: {æ®µéšçš„ã«è€ƒãˆã€æœ€å¾Œã«äº‹å®Ÿæ•´åˆã‚’è‡ªå·±æ¤œè¨¼}',
      final: 'Final Remindersï¼ˆæœ€å¾Œã«å†ç¢ºèªï¼‰: {- äº‹å®Ÿã®ã¿ - ç¦æ­¢: æ–°æƒ…å ±ã®å‰µä½œ - èªèª¿ã¯ä¸å¯§ä½“}',
      prefilled: 'Prefilled response: <response>{ã“ã“ã«æœ¬æ–‡}</response>',
      history: 'ä¼šè©±å±¥æ­´åæ˜ : {ç›´è¿‘ã®ã‚„ã‚Šã¨ã‚Šè¦ç´„/å¼•ç”¨}'
    };

    function missingIds(){
      return critEls.filter(el=>!el.checked).map(el=>el.dataset.id);
    }

    function buildFromMissing(count){
      const ids = missingIds();
      if(ids.length===0){ return; }
      const base = document.getElementById('rewrite').value.trim();
      const add = ids.slice(0, count).map(id=> '- ' + id2text[id]).join('\n\n');
      const draft = document.getElementById('draft').value.trim();
      const merged = `${base? base+'\n\n':''}ã€ä¸è¶³ã®è£œå®Œéª¨å­ã€‘\n${add}\n\nã€åŸæ–‡ï¼ˆå‚è€ƒï¼‰ã€‘\n${draft}`.trim();
      document.getElementById('rewrite').value = merged;
      renderTodo();
    }

    document.getElementById('buildOne').addEventListener('click', ()=> buildFromMissing(1));
    document.getElementById('buildAll').addEventListener('click', ()=> buildFromMissing(999));

    function renderTodo(){
      const ids = missingIds();
      const tips = ids.map(id=>({
        goal: 'Doneã‚’ä¸€æ–‡ã§å…ˆé ­ã«ã€‚å¯¾è±¡/é•·ã•/è©•ä¾¡åŸºæº–ã‚’å«ã‚ã‚‹ã€‚',
        role: 'å½¹å‰²ã¨èªèª¿ã‚’å®£è¨€ã—è¦–ç‚¹ã‚’å›ºå®šã€‚',
        ctx: 'èƒŒæ™¯ãƒ»å¯¾è±¡ãƒ»åˆ¶ç´„ã‚’è¦‹å‡ºã—/ã‚¿ã‚°ã§åŒºåˆ‡ã‚‹ã€‚',
        steps: 'æ‰‹é †ã‚’ç•ªå·ä»˜ãã§æ˜ç¤ºã€‚æœ€å¾Œã«ç¦æ­¢äº‹é …ã€‚',
        format: 'JSON/è¡¨/è¦‹å‡ºã—ç­‰ã§éµãƒ»é †åºãƒ»è¨€èªã‚’å›ºå®šã€‚',
        examples: '1â€“2ä»¶ã®Few-shotã€‚å¢ƒç•Œä¾‹ã‚’å«ã‚ã‚‹ã€‚',
        reason: 'ã€Œæ®µéšçš„ã«è€ƒãˆã‚‹ã€ã€Œè‡ªå·±æ¤œè¨¼ã™ã‚‹ã€ã‚’1è¡Œã§æŒ‡ç¤ºã€‚',
        final: 'çµ‚ç›¤ã«å®ˆã‚‹ãƒ«ãƒ¼ãƒ«ã‚’3ç‚¹å†æ²ã€‚',
        prefilled: 'ã‚¹ã‚±ãƒ«ãƒˆãƒ³ã‚’å…ˆã«æç¤ºã—æ•´å½¢ã‚’å®‰å®šåŒ–ã€‚',
        history: 'ç›´è¿‘ã®ã‚„ã‚Šã¨ã‚Šã®è¦æ—¨ã‚’1â€“2è¡Œã§åæ˜ ã€‚'
      }[id]));
      const html = ids.length? 'ä¸è¶³ï¼ˆå„ªå…ˆåº¦é †ï¼‰: ' + tips.map((t,i)=> `${i+1}. ${t}`).join(' / ') : 'ä¸è¶³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å®Ÿè¡Œå¯èƒ½ãªçŠ¶æ…‹ã§ã™ã€‚';
      document.getElementById('todo').textContent = html;
    }
    renderTodo();

    // 30ç§’ã‚¿ã‚¤ãƒãƒ¼
    let remain = 30.0; let timer = null; const bar = document.getElementById('bar'); const label = document.getElementById('tLabel');
    function tick(){
      remain = Math.max(0, remain - 0.1);
      const pct = 100 * (1 - remain/30.0);
      bar.style.width = pct + '%';
      label.textContent = remain.toFixed(1);
      if(remain<=0){ clearInterval(timer); timer=null; }
    }
    document.getElementById('tStart').addEventListener('click', ()=>{ if(!timer) timer = setInterval(tick,100); });
    document.getElementById('tPause').addEventListener('click', ()=>{ if(timer){ clearInterval(timer); timer=null; } });
    document.getElementById('tReset').addEventListener('click', ()=>{ remain=30.0; bar.style.width='0%'; label.textContent='30.0'; });
  </script>
</body>

