<head>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
  <style>
    .stat-box{border:1px solid rgba(0,0,0,.08); border-radius:.5rem; padding:.5rem .75rem; background:#fafafa}
    .kbd{display:inline-block;border:1px solid #d1d5db;border-bottom-width:2px;border-radius:.375rem;padding:.125rem .375rem;background:#fff}
    .btn{background:#f9fafb;border:1px solid #d1d5db;border-radius:.5rem;padding:.5rem .75rem}
    .btn.primary{background:#2563eb;color:#fff;border-color:#2563eb}
    .badge{display:inline-block; background:#eef2ff; color:#3730a3; border:1px solid #c7d2fe; border-radius:9999px; padding:.125rem .5rem; font-size:.75rem;}
    textarea{white-space:pre-wrap}
  </style>
</head>

<body class="min-h-screen antialiased bg-[#FAFAFA] font-[Inter]">
  <div class="p-4">
    <div class="mx-auto max-w-6xl text-base/7 text-gray-700">
      <h1 class="text-xl font-bold border-l border-[rgba(0,0,0,.08)] pl-4 bg-blue-100 py-4">
        ğŸ’¬ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ
      </h1>

      <!-- ä½¿ã„æ–¹ã‚«ãƒ¼ãƒ‰ -->
      <div class="bg-white rounded-md my-4 p-4 border shadow-[0_2px_2px_rgba(0,0,0,0.04)] border-[rgba(0,0,0,.08)]">
        <h2 class="font-medium mb-2 text-[#171717]"><strong>ğŸ§° ä½¿ã„æ–¹</strong></h2>
        <ul class="list-disc ml-5 text-sm text-gray-700">
          <li>å·¦ã®ãƒ•ã‚©ãƒ¼ãƒ ã« <span class="badge">ã‚³ã‚¢6</span> ã‚’å…¥åŠ›ã—ã€å¿…è¦ãªã‚‰ <span class="badge">ã‚ªãƒ—ã‚·ãƒ§ãƒ³4</span> ã‚’è¿½åŠ ã€‚</li>
          <li>å³å´ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå³æ™‚æ›´æ–°ã€‚å†…å®¹ã‚’ãã®ã¾ã¾å®Ÿè¡Œã«ä½¿ãˆã¾ã™ã€‚</li>
          <li>ãƒã‚§ãƒƒã‚¯ã«å¾“ã£ã¦ä¸è¶³ã‚’åŸ‹ã‚ã‚‹ã¨ã€å†ç¾æ€§ã®é«˜ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ãªã‚Šã¾ã™ã€‚</li>
        </ul>
      </div>

      <!-- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  + ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
        <div class="bg-white rounded-md p-4 border shadow-[0_2px_2px_rgba(0,0,0,0.04)] border-[rgba(0,0,0,.08)]">
          <div class="flex items-center gap-2 mb-3">
            <h2 class="font-medium text-[#171717]"><strong>ğŸ§© ãƒ•ã‚©ãƒ¼ãƒ </strong></h2>
            <span class="text-xs text-gray-500">ï¼ˆå…¥åŠ›ã§å³ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒæ›´æ–°ï¼‰</span>
          </div>

          <div class="mb-3 flex items-center gap-2">
            <label class="text-sm text-gray-600">ã‚µãƒ³ãƒ—ãƒ«</label>
            <select id="preset" class="border rounded px-2 py-1">
              <option value="none">ç©ºï¼ˆè‡ªåˆ†ã§å…¥åŠ›ï¼‰</option>
              <option value="press">ãƒ—ãƒ¬ã‚¹ãƒªãƒªãƒ¼ã‚¹ï¼ˆæ–°æ©Ÿèƒ½ç™ºè¡¨ï¼‰</option>
              <option value="recipe">ãƒ¬ã‚·ãƒ”ï¼ˆ15åˆ†ãƒ‘ã‚¹ã‚¿ï¼‰</option>
              <option value="bug">ãƒã‚°å ±å‘Šï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰</option>
              <option value="travel">æ—…è¡Œãƒ—ãƒ©ãƒ³ï¼ˆäº¬éƒ½1æ³Š2æ—¥ï¼‰</option>
            </select>
            <button id="clearAll" class="btn ml-auto">ãƒªã‚»ãƒƒãƒˆ</button>
          </div>

          <h3 class="font-semibold mb-2">[ã‚³ã‚¢]</h3>
          <label class="text-sm">1) å½¹å‰²ãƒ»ãƒˆãƒ¼ãƒ³</label>
          <input id="role" class="w-full border rounded px-3 py-2 mb-3" placeholder="ä¾‹: ã‚ãªãŸã¯åºƒå ±æ‹…å½“ã§ã™ã€‚ä¸å¯§ä½“ã§ã€æ–­å®šã¯é¿ã‘ã‚‹ã€‚" />

          <label class="text-sm">2) ç›®çš„ï¼ˆæˆåŠŸæ¡ä»¶ãƒ»ä¸€æ–‡ï¼‰</label>
          <input id="goal" class="w-full border rounded px-3 py-2 mb-3" placeholder="Doneã®å®šç¾©ã‚’ä¸€æ–‡ã§ã€‚ä¾‹: ITãƒ¡ãƒ‡ã‚£ã‚¢å‘ã‘ã«300å­—ã§è¦ç‚¹ã‚’ä¼ãˆã‚‹ã€‚" />

          <label class="text-sm">3) æ–‡è„ˆï¼ˆèƒŒæ™¯/å‚ç…§/å¯¾è±¡/åˆ¶ç´„ï¼‰</label>
          <textarea id="ctx" class="w-full border rounded px-3 py-2 h-28 mb-3" placeholder="å¯¾è±¡ãƒ»èª­ã¿æ‰‹ãƒ»å‰æãƒ»å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ãƒ»åˆ¶ç´„ãªã©"></textarea>

          <label class="text-sm">4) æ‰‹é †ãƒ»ãƒ«ãƒ¼ãƒ«ï¼ˆç•ªå·ä»˜ãï¼‰</label>
          <textarea id="steps" class="w-full border rounded px-3 py-2 h-24 mb-3" placeholder="1) ... 2) ... 3) ç¦æ­¢: ..."></textarea>

          <label class="text-sm">5) å‡ºåŠ›å½¢å¼ï¼ˆå³å¯†æŒ‡å®šï¼‰</label>
          <input id="format" class="w-full border rounded px-3 py-2 mb-3" placeholder="ä¾‹: JSON(keys: title, body, cta)ï¼è¡¨ï¼ˆåˆ—åâ€¦ï¼‰ï¼è¦‹å‡ºã—é †ãªã©" />

          <label class="text-sm">6) ä¾‹ï¼ˆFew-shot 1â€“2ä»¶ï¼‰</label>
          <textarea id="examples" class="w-full border rounded px-3 py-2 h-24 mb-3" placeholder="å…¥åŠ›: ...\næœŸå¾…å‡ºåŠ›: ..."></textarea>

          <h3 class="font-semibold mt-2 mb-2">[ã‚ªãƒ—ã‚·ãƒ§ãƒ³]</h3>
          <label class="text-sm">ä¼šè©±å±¥æ­´</label>
          <textarea id="conv" class="w-full border rounded px-3 py-2 h-20 mb-3" placeholder="ç›´è¿‘ã®ã‚„ã‚Šå–ã‚Šè¦ç´„/å¼•ç”¨"></textarea>

            <div>
              <label class="text-sm">æ€è€ƒæ–¹é‡</label>
              <input id="reason" class="w-full border rounded px-3 py-2" placeholder="æ®µéšçš„ã«è€ƒãˆã€æœ€å¾Œã«è‡ªå·±æ¤œè¨¼â€¦" />
            </div>
            <div>
              <label class="text-sm">é‡è¦ãƒã‚¤ãƒ³ãƒˆã®å†ç¢ºèªï¼ˆFinal Remindersï¼‰</label>
              <input id="final" class="w-full border rounded px-3 py-2" placeholder="æœ€å¾Œã«å®ˆã‚‹ãƒ«ãƒ¼ãƒ«ã‚’3ç‚¹â€¦" />
            </div>

          <label class="text-sm mt-3 block">Prefilled responseï¼ˆä»»æ„ï¼‰</label>
          <textarea id="skeleton" class="w-full border rounded px-3 py-2 h-20" placeholder="<response>{ã“ã“ã«æœ¬æ–‡}</response>"></textarea>
        </div>

        <!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼†ãƒã‚§ãƒƒã‚¯ -->
        <div class="bg-white rounded-md p-4 border shadow-[0_2px_2px_rgba(0,0,0,0.04)] border-[rgba(0,0,0,.08)]">
          <div class="flex items-center gap-3 mb-2">
            <h2 class="font-medium text-[#171717]"><strong>ğŸ“„ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</strong></h2>
            <span class="text-xs text-gray-500">ï¼ˆã“ã®ã¾ã¾å®Ÿè¡Œã«åˆ©ç”¨ã§ãã¾ã™ï¼‰</span>
          </div>
          <pre id="preview" class="whitespace-pre-wrap text-sm bg-[#0f172a] text-[#e2e8f0] rounded p-3 min-h-64"></pre>

          <div class="grid grid-cols-3 gap-3 mt-3">
            <div class="stat-box"><div class="text-xs text-gray-500">æ¦‚ç®—ãƒˆãƒ¼ã‚¯ãƒ³æ•°</div><div id="mTokens" class="text-2xl font-bold">0</div></div>
            <div class="stat-box"><div class="text-xs text-gray-500">æ–‡å­—æ•°</div><div id="mChars" class="text-2xl font-bold">0</div></div>
            <div class="stat-box"><div class="text-xs text-gray-500">è¡Œæ•°</div><div id="mLines" class="text-2xl font-bold">0</div></div>
          </div>

          <div class="mt-4">
            <h3 class="font-semibold mb-1">âœ… ãƒã‚§ãƒƒã‚¯</h3>
            <ul id="checklist" class="list-disc ml-5 text-sm text-gray-700"></ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
    // ãƒ—ãƒªã‚»ãƒƒãƒˆ
    // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
    const presets = {
      press: {
        role: 'ã‚ãªãŸã¯åºƒå ±æ‹…å½“ã§ã™ã€‚ä¸å¯§ä½“ã§ã€æ–­å®šè¡¨ç¾ã¯é¿ã‘ã¦ãã ã•ã„ã€‚',
        goal: 'ITãƒ¡ãƒ‡ã‚£ã‚¢å‘ã‘ã«æ–°æ©Ÿèƒ½ã‚’300å­—ã§ç´¹ä»‹ã™ã‚‹ï¼ˆæœ€å¾Œã«CTAã‚’1æ–‡ï¼‰ã€‚',
        ctx: 'å¯¾è±¡: ITãƒ¡ãƒ‡ã‚£ã‚¢èª­è€…\nå‰æ: æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚‚æœ‰ç›Š\nå‚ç…§: å¤‰æ›´ç‚¹A(æ¤œç´¢+30%)ã€B(ãƒ†ãƒ³ãƒ—ãƒ¬å…±æœ‰)\nåˆ¶ç´„: äº‹å®Ÿã®ã¿ã€æ•°å€¤ã¯ä¸¸ã‚ãªã„',
        steps: '1) å¤‰æ›´ç‚¹ã‚’2ç‚¹æŠ½å‡º\n2) åˆ©ç‚¹ã‚’å…·ä½“ä¾‹ã§2ã¤\n3) ç¦æ­¢: æ–°æƒ…å ±ã®å‰µä½œ',
        format: 'JSON (keys: title, body, cta)',
        examples: 'å…¥åŠ›: æ©Ÿèƒ½A/Bã®ç®‡æ¡æ›¸ã\næœŸå¾…å‡ºåŠ›: title/body/cta ã‚’å«ã‚€JSON',
        conv: '', reason: 'æ®µéšçš„ã«è€ƒãˆã€æœ€å¾Œã«äº‹å®Ÿæ•´åˆã‚’è‡ªå·±æ¤œè¨¼ã€‚', final: 'äº‹å®Ÿã®ã¿/ç¦æ­¢: å‰µä½œ/èªèª¿ã¯ä¸å¯§ä½“', skeleton: ''
      },
      recipe: {
        role: 'ã‚ãªãŸã¯æ–™ç†ç ”ç©¶å®¶ã§ã™ã€‚ä¸å¯§ä½“ã§ã€ææ–™ã¯å›½å†…è¡¨è¨˜ã«çµ±ä¸€ã—ã¦ãã ã•ã„ã€‚',
        goal: 'å¹³æ—¥å¤œã«15åˆ†ã§ä½œã‚Œã‚‹ãƒ‘ã‚¹ã‚¿ãƒ¬ã‚·ãƒ”ã‚’ä½œæˆã™ã‚‹ã€‚',
        ctx: 'å¯¾è±¡: 2äººåˆ†\nåˆ¶ç´„: é›»å­ãƒ¬ãƒ³ã‚¸ã¯ä½¿ã‚ãªã„ã€æ´—ã„ç‰©ã¯æœ€å°é™',
        steps: '1) ææ–™ã¨åˆ†é‡\n2) æ‰‹é †ï¼ˆç•ªå·ä»˜ãï¼‰\n3) ç‰‡ä»˜ã‘ã®ã‚³ãƒ„ã‚’1è¡Œ',
        format: 'Markdownï¼ˆè¦‹å‡ºã—: ææ–™/æ‰‹é †/ã‚³ãƒ„ï¼‰',
        examples: 'å…¥åŠ›: ãƒˆãƒãƒˆç¼¶/ãƒ„ãƒŠç¼¶/ç‰ã­ã/ã«ã‚“ã«ã\næœŸå¾…å‡ºåŠ›: ææ–™ã®è¡¨ãƒ»æ‰‹é †3â€“5è¡Œãƒ»æœ€å¾Œã«ã‚³ãƒ„',
        conv: '', reason: 'ç°¡æ½”ã«ã€è¦ç‚¹ã‚’å…ˆã«åˆ—æŒ™ã€‚', final: 'ç¦: ç”Ÿç„¼ã‘/éåº¦ãªè£…é£¾è¡¨ç¾', skeleton: ''
      },
      bug: {
        role: 'ã‚ãªãŸã¯QAã§ã™ã€‚ä¸å¯§ä½“ã§ã€å†ç¾æ‰‹é †ã¯å³å¯†ã«æ›¸ã„ã¦ãã ã•ã„ã€‚',
        goal: 'ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®è¡¨ç¤ºå´©ã‚Œã‚’é–‹ç™ºè€…ã«å…±æœ‰ã™ã‚‹ãƒã‚±ãƒƒãƒˆã‚’ä½œã‚‹ã€‚',
        ctx: 'ç’°å¢ƒ: macOS/Chrome æœ€æ–°\nå¯¾è±¡: ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ\nåˆ¶ç´„: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆIDã‚’å«ã‚ã‚‹',
        steps: '1) æœŸå¾…çµæœ\n2) å®Ÿéš›çµæœ\n3) å†ç¾æ‰‹é †\n4) è¿½åŠ æƒ…å ±ï¼ˆãƒ­ã‚°/SSï¼‰',
        format: 'YAML (keys: expected, actual, steps, evidence)',
        examples: 'å…¥åŠ›: 768pxã§å´©ã‚Œã‚‹\næœŸå¾…å‡ºåŠ›: å†ç¾æ‰‹é †ã¯3ã‚¹ãƒ†ãƒƒãƒ—ä»¥ä¸Š',
        conv: '', reason: 'æ›–æ˜§èªã‚’é¿ã‘ã€æ•°å€¤ã§æŒ‡å®šã€‚', final: 'ç”»åƒIDå¿…é ˆ/ç¦: æ¨æ¸¬ãƒ»æ–­å®šçš„åŸå› ', skeleton: ''
      },
      travel: {
        role: 'ã‚ãªãŸã¯æ—…è¡Œãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ã§ã™ã€‚ä¸å¯§ä½“ã§ã€éåº¦ãªå®£ä¼è¡¨ç¾ã¯é¿ã‘ã¦ãã ã•ã„ã€‚',
        goal: 'é€±æœ«ã®äº¬éƒ½1æ³Š2æ—¥ãƒ¢ãƒ‡ãƒ«ãƒ—ãƒ©ãƒ³ã‚’ä½œã‚‹ï¼ˆé›¨å¤©ä»£æ›¿æ¡ˆã¤ãï¼‰ã€‚',
        ctx: 'å¯¾è±¡: 20â€“40ä»£ã‚«ãƒƒãƒ—ãƒ«\nåˆ¶ç´„: äºˆç®—2ä¸‡å††/äººã€ç§»å‹•ã¯å…¬å…±äº¤é€š',
        steps: '1) 1æ—¥ç›® åˆå‰/åˆå¾Œ/å¤œ\n2) 2æ—¥ç›® åˆå‰/åˆå¾Œ\n3) é›¨å¤©ä»£æ›¿æ¡ˆ',
        format: 'ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ™‚é–“å¸¯/å ´æ‰€/æ‰€è¦/è²»ç”¨/ãƒ¡ãƒ¢ï¼‰',
        examples: 'å…¥åŠ›: æ¸…æ°´å¯º/ç¥‡åœ’/åµå±±\næœŸå¾…å‡ºåŠ›: å„è¡Œã«è²»ç”¨ç›®å®‰ã‚’å«ã‚€',
        conv: '', reason: 'ç§»å‹•å°ç·šã‚’æœ€çŸ­ã«ã€è·é›¢é–¢ä¿‚ã‚’å°Šé‡ã€‚', final: 'ç¦: è»Šç§»å‹•ã®å‰æ', skeleton: ''
      }
    };

    const el = (id)=>document.getElementById(id);
    const fields = ['role','goal','ctx','steps','format','examples','conv','reason','final','skeleton'];

    function build(){
      const v = Object.fromEntries(fields.map(k=>[k, el(k).value.trim()]));
      const core = [v.role, v.goal, v.ctx, v.steps, v.format, v.examples];
      const opt  = [v.conv, v.reason, v.final, v.skeleton];

      const text = `ã€ã‚³ã‚¢ã€‘\nå½¹å‰²ãƒ»ãƒˆãƒ¼ãƒ³: ${v.role}\nç›®çš„ï¼ˆæˆåŠŸæ¡ä»¶ï¼‰: ${v.goal}\næ–‡è„ˆï¼ˆèƒŒæ™¯/å‚ç…§ï¼‰:\n${v.ctx}\næ‰‹é †ãƒ»ãƒ«ãƒ¼ãƒ«:\n${v.steps}\nå‡ºåŠ›å½¢å¼: ${v.format}\nä¾‹ï¼ˆFew-shotï¼‰:\n${v.examples}\n\nã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‘\nä¼šè©±å±¥æ­´:\n${v.conv}\næ€è€ƒæ–¹é‡: ${v.reason}\né‡è¦ãƒã‚¤ãƒ³ãƒˆã®å†ç¢ºèª: ${v.final}\nPrefilled responseï¼ˆä»»æ„ï¼‰:\n${v.skeleton}`.trim();

      el('preview').textContent = text;
      el('mChars').textContent = text.length;
      el('mLines').textContent = text.split(/\n/).length;
      el('mTokens').textContent = estimateTokens(text);
      renderChecklist(core, opt);
    }

    function estimateTokens(s){
      // ç°¡æ˜“: è‹±æ•°å­—ã¯é€£ç¶šã§1ã€æ—¥æœ¬èªã¯1æ–‡å­—=1ã€è¨˜å·ã¯1
      let count = 0; let i = 0;
      while(i < s.length){
        const ch = s[i];
        if(/[A-Za-z0-9]/.test(ch)){
          while(i < s.length && /[A-Za-z0-9]/.test(s[i])) i++;
          count++; continue;
        }
        if(/[\u3040-\u30ff\u3400-\u9fff]/.test(ch)) { i++; count++; continue; }
        if(/\s/.test(ch)) { i++; continue; }
        i++; count++;
      }
      return count;
    }

    function renderChecklist(core, opt){
      const names = ['å½¹å‰²ãƒ»ãƒˆãƒ¼ãƒ³','ç›®çš„ï¼ˆæˆåŠŸæ¡ä»¶ï¼‰','æ–‡è„ˆ','æ‰‹é †ãƒ»ãƒ«ãƒ¼ãƒ«','å‡ºåŠ›å½¢å¼','ä¾‹'];
      const onames= ['ä¼šè©±å±¥æ­´','æ€è€ƒæ–¹é‡','Final Reminders','Prefilled'];
      const missing = [];
      core.forEach((v,i)=>{ if(!v) missing.push(`ã‚³ã‚¢: ${names[i]} ãŒæœªå…¥åŠ›`); });
      const list = el('checklist');
      list.innerHTML = '';
      if(missing.length===0){
        list.innerHTML = '<li>ã‚³ã‚¢6ãŒã™ã¹ã¦å…¥åŠ›ã•ã‚Œã¦ã„ã¾ã™ã€‚æ§‹æˆã¯å®Œæˆã§ã™ã€‚</li>';
      } else {
        missing.forEach(m=>{ const li=document.createElement('li'); li.textContent=m; list.appendChild(li); });
      }
      opt.forEach((v,i)=>{ if(!v){ const li=document.createElement('li'); li.className='text-gray-500'; li.textContent=`ã‚ªãƒ—ã‚·ãƒ§ãƒ³: ${onames[i]} ã¯ç©ºï¼ˆå¿…è¦ã«å¿œã˜ã¦è¿½è¨˜ï¼‰`; list.appendChild(li);} });
    }

    // ã‚¤ãƒ™ãƒ³ãƒˆ
    fields.forEach(id=> el(id).addEventListener('input', build));
    el('preset').addEventListener('change', ()=>{
      const key = el('preset').value; if(key==='none'){ fields.forEach(id=> el(id).value=''); build(); return; }
      const p = presets[key]; for(const k of fields){ el(k).value = p[k] ?? ''; } build();
    });
    el('clearAll').addEventListener('click', ()=>{ fields.forEach(id=> el(id).value=''); build(); });
    // ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ãƒ»ä¿å­˜ãƒœã‚¿ãƒ³ã¯ä»•æ§˜ã«ã‚ˆã‚Šæœªå®Ÿè£…

    // åˆæœŸåŒ–
    build();
  </script>
</body>
